var kepubify_try=function(e){"use strict";var extendStatics$1=function(e,t){return(extendStatics$1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function __extends$1(e,t){function __(){this.constructor=e}extendStatics$1(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}var t,n,r,o,__assign$3=function(){return(__assign$3=Object.assign||function __assign(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function __values$2(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function __read$4(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s}function __spread$3(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(__read$4(arguments[t]));return e}function __read$3(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s}function __spread$2(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(__read$3(arguments[t]));return e}!function(e){e.Ok="ok",e.Exited="exited",e.Crashed="crashed",e.Abnormal="abnormal"}(t||(t={})),function(e){e.Ok="ok",e.Errored="errored",e.Crashed="crashed"}(n||(n={})),function(e){e.Fatal="fatal",e.Error="error",e.Warning="warning",e.Log="log",e.Info="info",e.Debug="debug",e.Critical="critical"}(r||(r={})),function(e){e.fromString=function fromString(t){switch(t){case"debug":return e.Debug;case"info":return e.Info;case"warn":case"warning":return e.Warning;case"error":return e.Error;case"fatal":return e.Fatal;case"critical":return e.Critical;case"log":default:return e.Log}}}(r||(r={})),function(e){e.Unknown="unknown",e.Skipped="skipped",e.Success="success",e.RateLimit="rate_limit",e.Invalid="invalid",e.Failed="failed"}(o||(o={})),function(e){e.fromHttpCode=function fromHttpCode(t){return t>=200&&t<300?e.Success:429===t?e.RateLimit:t>=400&&t<500?e.Invalid:t>=500?e.Failed:e.Unknown}}(o||(o={}));var __assign$2=function(){return(__assign$2=Object.assign||function __assign(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function __read$2(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s}function __spread$1(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(__read$2(arguments[t]));return e}function isError(e){switch(Object.prototype.toString.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return isInstanceOf(e,Error)}}function isErrorEvent(e){return"[object ErrorEvent]"===Object.prototype.toString.call(e)}function isDOMError(e){return"[object DOMError]"===Object.prototype.toString.call(e)}function isString(e){return"[object String]"===Object.prototype.toString.call(e)}function isPrimitive(e){return null===e||"object"!=typeof e&&"function"!=typeof e}function isPlainObject(e){return"[object Object]"===Object.prototype.toString.call(e)}function isEvent(e){return"undefined"!=typeof Event&&isInstanceOf(e,Event)}function isElement(e){return"undefined"!=typeof Element&&isInstanceOf(e,Element)}function isThenable(e){return Boolean(e&&e.then&&"function"==typeof e.then)}function isInstanceOf(e,t){try{return e instanceof t}catch(e){return!1}}function htmlTreeAsString(e,t){try{for(var n=e,r=[],o=0,i=0,s=" > ".length,a=void 0;n&&o++<5&&!("html"===(a=_htmlElementAsString(n,t))||o>1&&i+r.length*s+a.length>=80);)r.push(a),i+=a.length,n=n.parentNode;return r.reverse().join(" > ")}catch(e){return"<unknown>"}}function _htmlElementAsString(e,t){var n,r,o,i,s,a,c,u=e,l=[];if(!u||!u.tagName)return"";l.push(u.tagName.toLowerCase());var p=(null===(n=t)||void 0===n?void 0:n.length)?t.filter((function(e){return u.getAttribute(e)})).map((function(e){return[e,u.getAttribute(e)]})):null;if(null===(r=p)||void 0===r?void 0:r.length)p.forEach((function(e){l.push("["+e[0]+'="'+e[1]+'"]')}));else if(u.id&&l.push("#"+u.id),(o=u.className)&&isString(o))for(i=o.split(/\s+/),c=0;c<i.length;c++)l.push("."+i[c]);var d=["type","name","title","alt"];for(c=0;c<d.length;c++)s=d[c],(a=u.getAttribute(s))&&l.push("["+s+'="'+a+'"]');return l.join("")}var extendStatics=function(e,t){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};var __assign$1=function(){return(__assign$1=Object.assign||function __assign(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function __values$1(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}var i=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function setProtoOf(e,t){return e.__proto__=t,e}:function mixinProperties(e,t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n]);return e});var s=function(e){function SentryError(t){var n=this.constructor,r=e.call(this,t)||this;return r.message=t,r.name=n.prototype.constructor.name,i(r,n.prototype),r}return function __extends(e,t){function __(){this.constructor=e}extendStatics(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}(SentryError,e),SentryError}(Error),a=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+))?@)([\w.-]+)(?::(\d+))?\/(.+)/,c="Invalid Dsn",u=function(){function Dsn(e){"string"==typeof e?this._fromString(e):this._fromComponents(e),this._validate()}return Dsn.prototype.toString=function(e){void 0===e&&(e=!1);var t=this,n=t.host,r=t.path,o=t.pass,i=t.port,s=t.projectId;return t.protocol+"://"+t.publicKey+(e&&o?":"+o:"")+"@"+n+(i?":"+i:"")+"/"+(r?r+"/":r)+s},Dsn.prototype._fromString=function(e){var t=a.exec(e);if(!t)throw new s(c);var n=function __read$1(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s}(t.slice(1),6),r=n[0],o=n[1],i=n[2],u=void 0===i?"":i,l=n[3],p=n[4],d=void 0===p?"":p,f="",h=n[5],v=h.split("/");if(v.length>1&&(f=v.slice(0,-1).join("/"),h=v.pop()),h){var _=h.match(/^\d+/);_&&(h=_[0])}this._fromComponents({host:l,pass:u,path:f,projectId:h,port:d,protocol:r,publicKey:o})},Dsn.prototype._fromComponents=function(e){"user"in e&&!("publicKey"in e)&&(e.publicKey=e.user),this.user=e.publicKey||"",this.protocol=e.protocol,this.publicKey=e.publicKey||"",this.pass=e.pass||"",this.host=e.host,this.port=e.port||"",this.path=e.path||"",this.projectId=e.projectId},Dsn.prototype._validate=function(){var e=this;if(["protocol","publicKey","host","projectId"].forEach((function(t){if(!e[t])throw new s("Invalid Dsn: "+t+" missing")})),!this.projectId.match(/^\d+$/))throw new s("Invalid Dsn: Invalid projectId "+this.projectId);if("http"!==this.protocol&&"https"!==this.protocol)throw new s("Invalid Dsn: Invalid protocol "+this.protocol);if(this.port&&isNaN(parseInt(this.port,10)))throw new s("Invalid Dsn: Invalid port "+this.port)},Dsn}();function isNodeEnv(){return"[object process]"===Object.prototype.toString.call("undefined"!=typeof process?process:0)}function truncate(e,t){return void 0===t&&(t=0),"string"!=typeof e||0===t||e.length<=t?e:e.substr(0,t)+"..."}function safeJoin(e,t){if(!Array.isArray(e))return"";for(var n=[],r=0;r<e.length;r++){var o=e[r];try{n.push(String(o))}catch(e){n.push("[value cannot be serialized]")}}return n.join(t)}function isMatchingPattern(e,t){return!!isString(e)&&(function isRegExp(e){return"[object RegExp]"===Object.prototype.toString.call(e)}(t)?t.test(e):"string"==typeof t&&-1!==e.indexOf(t))}var l={};function getGlobalObject(){return isNodeEnv()?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:l}function uuid4(){var e=getGlobalObject(),t=e.crypto||e.msCrypto;if(void 0!==t&&t.getRandomValues){var n=new Uint16Array(8);t.getRandomValues(n),n[3]=4095&n[3]|16384,n[4]=16383&n[4]|32768;var pad=function(e){for(var t=e.toString(16);t.length<4;)t="0"+t;return t};return pad(n[0])+pad(n[1])+pad(n[2])+pad(n[3])+pad(n[4])+pad(n[5])+pad(n[6])+pad(n[7])}return"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))}function parseUrl(e){if(!e)return{};var t=e.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!t)return{};var n=t[6]||"",r=t[8]||"";return{host:t[4],path:t[5],protocol:t[2],relative:t[5]+n+r}}function getEventDescription(e){if(e.message)return e.message;if(e.exception&&e.exception.values&&e.exception.values[0]){var t=e.exception.values[0];return t.type&&t.value?t.type+": "+t.value:t.type||t.value||e.event_id||"<unknown>"}return e.event_id||"<unknown>"}function consoleSandbox(e){var t=getGlobalObject();if(!("console"in t))return e();var n=t.console,r={};["debug","info","warn","error","log","assert"].forEach((function(e){e in t.console&&n[e].__sentry_original__&&(r[e]=n[e],n[e]=n[e].__sentry_original__)}));var o=e();return Object.keys(r).forEach((function(e){n[e]=r[e]})),o}function addExceptionTypeValue(e,t,n){e.exception=e.exception||{},e.exception.values=e.exception.values||[],e.exception.values[0]=e.exception.values[0]||{},e.exception.values[0].value=e.exception.values[0].value||t||"",e.exception.values[0].type=e.exception.values[0].type||n||"Error"}function addExceptionMechanism(e,t){void 0===t&&(t={});try{e.exception.values[0].mechanism=e.exception.values[0].mechanism||{},Object.keys(t).forEach((function(n){e.exception.values[0].mechanism[n]=t[n]}))}catch(e){}}var p=getGlobalObject(),d="Sentry Logger ",f=function(){function Logger(){this._enabled=!1}return Logger.prototype.disable=function(){this._enabled=!1},Logger.prototype.enable=function(){this._enabled=!0},Logger.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._enabled&&consoleSandbox((function(){p.console.log(d+"[Log]: "+e.join(" "))}))},Logger.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._enabled&&consoleSandbox((function(){p.console.warn(d+"[Warn]: "+e.join(" "))}))},Logger.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._enabled&&consoleSandbox((function(){p.console.error(d+"[Error]: "+e.join(" "))}))},Logger}();p.__SENTRY__=p.__SENTRY__||{};var h=p.__SENTRY__.logger||(p.__SENTRY__.logger=new f),v=function(){function Memo(){this._hasWeakSet="function"==typeof WeakSet,this._inner=this._hasWeakSet?new WeakSet:[]}return Memo.prototype.memoize=function(e){if(this._hasWeakSet)return!!this._inner.has(e)||(this._inner.add(e),!1);for(var t=0;t<this._inner.length;t++){if(this._inner[t]===e)return!0}return this._inner.push(e),!1},Memo.prototype.unmemoize=function(e){if(this._hasWeakSet)this._inner.delete(e);else for(var t=0;t<this._inner.length;t++)if(this._inner[t]===e){this._inner.splice(t,1);break}},Memo}(),_="<anonymous>";function getFunctionName(e){try{return e&&"function"==typeof e&&e.name||_}catch(e){return _}}function fill(e,t,n){if(t in e){var r=e[t],o=n(r);if("function"==typeof o)try{o.prototype=o.prototype||{},Object.defineProperties(o,{__sentry_original__:{enumerable:!1,value:r}})}catch(e){}e[t]=o}}function getWalkSource(e){if(isError(e)){var t=e,n={message:t.message,name:t.name,stack:t.stack};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n}if(isEvent(e)){var o=e,i={};i.type=o.type;try{i.target=isElement(o.target)?htmlTreeAsString(o.target):Object.prototype.toString.call(o.target)}catch(e){i.target="<unknown>"}try{i.currentTarget=isElement(o.currentTarget)?htmlTreeAsString(o.currentTarget):Object.prototype.toString.call(o.currentTarget)}catch(e){i.currentTarget="<unknown>"}for(var r in"undefined"!=typeof CustomEvent&&isInstanceOf(e,CustomEvent)&&(i.detail=o.detail),o)Object.prototype.hasOwnProperty.call(o,r)&&(i[r]=o);return i}return e}function jsonSize(e){return function utf8Length(e){return~-encodeURI(e).split(/%..|./).length}(JSON.stringify(e))}function normalizeToSize(e,t,n){void 0===t&&(t=3),void 0===n&&(n=102400);var r=normalize(e,t);return jsonSize(r)>n?normalizeToSize(e,t-1,n):r}function normalizeValue(e,t){return"domain"===t&&e&&"object"==typeof e&&e._events?"[Domain]":"domainEmitter"===t?"[DomainEmitter]":"undefined"!=typeof global&&e===global?"[Global]":"undefined"!=typeof window&&e===window?"[Window]":"undefined"!=typeof document&&e===document?"[Document]":function isSyntheticEvent(e){return isPlainObject(e)&&"nativeEvent"in e&&"preventDefault"in e&&"stopPropagation"in e}(e)?"[SyntheticEvent]":"number"==typeof e&&e!=e?"[NaN]":void 0===e?"[undefined]":"function"==typeof e?"[Function: "+getFunctionName(e)+"]":"symbol"==typeof e?"["+String(e)+"]":"bigint"==typeof e?"[BigInt: "+String(e)+"]":e}function walk(e,t,n,r){if(void 0===n&&(n=1/0),void 0===r&&(r=new v),0===n)return function serializeValue(e){var t=Object.prototype.toString.call(e);if("string"==typeof e)return e;if("[object Object]"===t)return"[Object]";if("[object Array]"===t)return"[Array]";var n=normalizeValue(e);return isPrimitive(n)?n:t}(t);if(null!=t&&"function"==typeof t.toJSON)return t.toJSON();var o=normalizeValue(t,e);if(isPrimitive(o))return o;var i=getWalkSource(t),s=Array.isArray(t)?[]:{};if(r.memoize(t))return"[Circular ~]";for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(s[a]=walk(a,i[a],n-1,r));return r.unmemoize(t),s}function normalize(e,t){try{return JSON.parse(JSON.stringify(e,(function(e,n){return walk(e,n,t)})))}catch(e){return"**non-serializable**"}}function extractExceptionKeysForMessage(e,t){void 0===t&&(t=40);var n=Object.keys(getWalkSource(e));if(n.sort(),!n.length)return"[object has no keys]";if(n[0].length>=t)return truncate(n[0],t);for(var r=n.length;r>0;r--){var o=n.slice(0,r).join(", ");if(!(o.length>t))return r===n.length?o:truncate(o,t)}return""}function dropUndefinedKeys(e){var t,n;if(isPlainObject(e)){var r=e,o={};try{for(var i=__values$1(Object.keys(r)),s=i.next();!s.done;s=i.next()){var a=s.value;void 0!==r[a]&&(o[a]=dropUndefinedKeys(r[a]))}}catch(e){t={error:e}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return o}return Array.isArray(e)?e.map(dropUndefinedKeys):e}function supportsFetch(){if(!("fetch"in getGlobalObject()))return!1;try{return new Headers,new Request(""),new Response,!0}catch(e){return!1}}function isNativeFetch(e){return e&&/^function fetch\(\)\s+\{\s+\[native code\]\s+\}$/.test(e.toString())}function supportsReferrerPolicy(){if(!supportsFetch())return!1;try{return new Request("_",{referrerPolicy:"origin"}),!0}catch(e){return!1}}var y,g=getGlobalObject(),m={},b={};function instrument(e){if(!b[e])switch(b[e]=!0,e){case"console":!function instrumentConsole(){if(!("console"in g))return;["debug","info","warn","error","log","assert"].forEach((function(e){e in g.console&&fill(g.console,e,(function(t){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];triggerHandlers("console",{args:n,level:e}),t&&Function.prototype.apply.call(t,g.console,n)}}))}))}();break;case"dom":!function instrumentDOM(){if(!("document"in g))return;var e=triggerHandlers.bind(null,"dom"),t=makeDOMEventHandler(e,!0);g.document.addEventListener("click",t,!1),g.document.addEventListener("keypress",t,!1),["EventTarget","Node"].forEach((function(t){var n=g[t]&&g[t].prototype;n&&n.hasOwnProperty&&n.hasOwnProperty("addEventListener")&&(fill(n,"addEventListener",(function(t){return function(n,r,o){if("click"===n||"keypress"==n)try{var i=this,s=i.__sentry_instrumentation_handlers__=i.__sentry_instrumentation_handlers__||{},a=s[n]=s[n]||{refCount:0};if(!a.handler){var c=makeDOMEventHandler(e);a.handler=c,t.call(this,n,c,o)}a.refCount+=1}catch(e){}return t.call(this,n,r,o)}})),fill(n,"removeEventListener",(function(e){return function(t,n,r){if("click"===t||"keypress"==t)try{var o=this,i=o.__sentry_instrumentation_handlers__||{},s=i[t];s&&(s.refCount-=1,s.refCount<=0&&(e.call(this,t,s.handler,r),s.handler=void 0,delete i[t]),0===Object.keys(i).length&&delete o.__sentry_instrumentation_handlers__)}catch(e){}return e.call(this,t,n,r)}})))}))}();break;case"xhr":!function instrumentXHR(){if(!("XMLHttpRequest"in g))return;var e=[],t=[],n=XMLHttpRequest.prototype;fill(n,"open",(function(n){return function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];var i=this,s=r[1];i.__sentry_xhr__={method:isString(r[0])?r[0].toUpperCase():r[0],url:r[1]},isString(s)&&"POST"===i.__sentry_xhr__.method&&s.match(/sentry_key/)&&(i.__sentry_own_request__=!0);var onreadystatechangeHandler=function(){if(4===i.readyState){try{i.__sentry_xhr__&&(i.__sentry_xhr__.status_code=i.status)}catch(e){}try{var n=e.indexOf(i);if(-1!==n){e.splice(n);var o=t.splice(n)[0];i.__sentry_xhr__&&void 0!==o[0]&&(i.__sentry_xhr__.body=o[0])}}catch(e){}triggerHandlers("xhr",{args:r,endTimestamp:Date.now(),startTimestamp:Date.now(),xhr:i})}};return"onreadystatechange"in i&&"function"==typeof i.onreadystatechange?fill(i,"onreadystatechange",(function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return onreadystatechangeHandler(),e.apply(i,t)}})):i.addEventListener("readystatechange",onreadystatechangeHandler),n.apply(i,r)}})),fill(n,"send",(function(n){return function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];return e.push(this),t.push(r),triggerHandlers("xhr",{args:r,startTimestamp:Date.now(),xhr:this}),n.apply(this,r)}}))}();break;case"fetch":!function instrumentFetch(){if(!function supportsNativeFetch(){if(!supportsFetch())return!1;var e=getGlobalObject();if(isNativeFetch(e.fetch))return!0;var t=!1,n=e.document;if(n&&"function"==typeof n.createElement)try{var r=n.createElement("iframe");r.hidden=!0,n.head.appendChild(r),r.contentWindow&&r.contentWindow.fetch&&(t=isNativeFetch(r.contentWindow.fetch)),n.head.removeChild(r)}catch(e){h.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",e)}return t}())return;fill(g,"fetch",(function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r={args:t,fetchData:{method:getFetchMethod(t),url:getFetchUrl(t)},startTimestamp:Date.now()};return triggerHandlers("fetch",__assign$1({},r)),e.apply(g,t).then((function(e){return triggerHandlers("fetch",__assign$1(__assign$1({},r),{endTimestamp:Date.now(),response:e})),e}),(function(e){throw triggerHandlers("fetch",__assign$1(__assign$1({},r),{endTimestamp:Date.now(),error:e})),e}))}}))}();break;case"history":!function instrumentHistory(){if(!function supportsHistory(){var e=getGlobalObject(),t=e.chrome,n=t&&t.app&&t.app.runtime,r="history"in e&&!!e.history.pushState&&!!e.history.replaceState;return!n&&r}())return;var e=g.onpopstate;function historyReplacementFunction(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=t.length>2?t[2]:void 0;if(r){var o=y,i=String(r);y=i,triggerHandlers("history",{from:o,to:i})}return e.apply(this,t)}}g.onpopstate=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=g.location.href,o=y;if(y=r,triggerHandlers("history",{from:o,to:r}),e)try{return e.apply(this,t)}catch(e){}},fill(g.history,"pushState",historyReplacementFunction),fill(g.history,"replaceState",historyReplacementFunction)}();break;case"error":!function instrumentError(){w=g.onerror,g.onerror=function(e,t,n,r,o){return triggerHandlers("error",{column:r,error:o,line:n,msg:e,url:t}),!!w&&w.apply(this,arguments)}}();break;case"unhandledrejection":!function instrumentUnhandledRejection(){k=g.onunhandledrejection,g.onunhandledrejection=function(e){return triggerHandlers("unhandledrejection",e),!k||k.apply(this,arguments)}}();break;default:h.warn("unknown instrumentation type:",e)}}function addInstrumentationHandler(e){e&&"string"==typeof e.type&&"function"==typeof e.callback&&(m[e.type]=m[e.type]||[],m[e.type].push(e.callback),instrument(e.type))}function triggerHandlers(e,t){var n,r;if(e&&m[e])try{for(var o=__values$1(m[e]||[]),i=o.next();!i.done;i=o.next()){var s=i.value;try{s(t)}catch(t){h.error("Error while triggering instrumentation handler.\nType: "+e+"\nName: "+getFunctionName(s)+"\nError: "+t)}}}catch(e){n={error:e}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}}function getFetchMethod(e){return void 0===e&&(e=[]),"Request"in g&&isInstanceOf(e[0],Request)&&e[0].method?String(e[0].method).toUpperCase():e[1]&&e[1].method?String(e[1].method).toUpperCase():"GET"}function getFetchUrl(e){return void 0===e&&(e=[]),"string"==typeof e[0]?e[0]:"Request"in g&&isInstanceOf(e[0],Request)?e[0].url:String(e[0])}var E,S;function makeDOMEventHandler(e,t){return void 0===t&&(t=!1),function(n){if(n&&S!==n&&!function shouldSkipDOMEvent(e){if("keypress"!==e.type)return!1;try{var t=e.target;if(!t||!t.tagName)return!0;if("INPUT"===t.tagName||"TEXTAREA"===t.tagName||t.isContentEditable)return!1}catch(e){}return!0}(n)){var r="keypress"===n.type?"input":n.type;(void 0===E||function shouldShortcircuitPreviousDebounce(e,t){if(!e)return!0;if(e.type!==t.type)return!0;try{if(e.target!==t.target)return!0}catch(e){}return!1}(S,n))&&(e({event:n,name:r,global:t}),S=n),clearTimeout(E),E=g.setTimeout((function(){E=void 0}),1e3)}}}var w=null;var x,k=null;!function(e){e.PENDING="PENDING",e.RESOLVED="RESOLVED",e.REJECTED="REJECTED"}(x||(x={}));var O=function(){function SyncPromise(e){var t=this;this._state=x.PENDING,this._handlers=[],this._resolve=function(e){t._setResult(x.RESOLVED,e)},this._reject=function(e){t._setResult(x.REJECTED,e)},this._setResult=function(e,n){t._state===x.PENDING&&(isThenable(n)?n.then(t._resolve,t._reject):(t._state=e,t._value=n,t._executeHandlers()))},this._attachHandler=function(e){t._handlers=t._handlers.concat(e),t._executeHandlers()},this._executeHandlers=function(){if(t._state!==x.PENDING){var e=t._handlers.slice();t._handlers=[],e.forEach((function(e){e.done||(t._state===x.RESOLVED&&e.onfulfilled&&e.onfulfilled(t._value),t._state===x.REJECTED&&e.onrejected&&e.onrejected(t._value),e.done=!0)}))}};try{e(this._resolve,this._reject)}catch(e){this._reject(e)}}return SyncPromise.resolve=function(e){return new SyncPromise((function(t){t(e)}))},SyncPromise.reject=function(e){return new SyncPromise((function(t,n){n(e)}))},SyncPromise.all=function(e){return new SyncPromise((function(t,n){if(Array.isArray(e))if(0!==e.length){var r=e.length,o=[];e.forEach((function(e,i){SyncPromise.resolve(e).then((function(e){o[i]=e,0===(r-=1)&&t(o)})).then(null,n)}))}else t([]);else n(new TypeError("Promise.all requires an array as input."))}))},SyncPromise.prototype.then=function(e,t){var n=this;return new SyncPromise((function(r,o){n._attachHandler({done:!1,onfulfilled:function(t){if(e)try{return void r(e(t))}catch(e){return void o(e)}else r(t)},onrejected:function(e){if(t)try{return void r(t(e))}catch(e){return void o(e)}else o(e)}})}))},SyncPromise.prototype.catch=function(e){return this.then((function(e){return e}),e)},SyncPromise.prototype.finally=function(e){var t=this;return new SyncPromise((function(n,r){var o,i;return t.then((function(t){i=!1,o=t,e&&e()}),(function(t){i=!0,o=t,e&&e()})).then((function(){i?r(o):n(o)}))}))},SyncPromise.prototype.toString=function(){return"[object SyncPromise]"},SyncPromise}(),T=function(){function PromiseBuffer(e){this._limit=e,this._buffer=[]}return PromiseBuffer.prototype.isReady=function(){return void 0===this._limit||this.length()<this._limit},PromiseBuffer.prototype.add=function(e){var t=this;if(!this.isReady())return O.reject(new s("Not adding Promise due to buffer limit reached."));var n=e();return-1===this._buffer.indexOf(n)&&this._buffer.push(n),n.then((function(){return t.remove(n)})).then(null,(function(){return t.remove(n).then(null,(function(){}))})),n},PromiseBuffer.prototype.remove=function(e){return this._buffer.splice(this._buffer.indexOf(e),1)[0]},PromiseBuffer.prototype.length=function(){return this._buffer.length},PromiseBuffer.prototype.drain=function(e){var t=this;return new O((function(n){var r=setTimeout((function(){e&&e>0&&n(!1)}),e);O.all(t._buffer).then((function(){clearTimeout(r),n(!0)})).then(null,(function(){n(!0)}))}))},PromiseBuffer}(),F={nowSeconds:function(){return Date.now()/1e3}};var j=isNodeEnv()?function getNodePerformance(){try{return function dynamicRequire(e,t){return e.require(t)}(module,"perf_hooks").performance}catch(e){return}}():function getBrowserPerformance(){var e=getGlobalObject().performance;if(e&&e.now)return{now:function(){return e.now()},timeOrigin:Date.now()-e.now()}}(),C=void 0===j?F:{nowSeconds:function(){return(j.timeOrigin+j.now())/1e3}},P=F.nowSeconds.bind(F),I=C.nowSeconds.bind(C);!function(){var e=getGlobalObject().performance;if(e&&e.now){var t=36e5,n=e.now(),r=Date.now(),o=e.timeOrigin?Math.abs(e.timeOrigin+n-r):t,i=o<t,s=e.timing&&e.timing.navigationStart,a="number"==typeof s?Math.abs(s+n-r):t;(i||a<t)&&(o<=a&&e.timeOrigin)}}();var H=function(){function Scope(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._user={},this._tags={},this._extra={},this._contexts={}}return Scope.clone=function(e){var t=new Scope;return e&&(t._breadcrumbs=__spread$1(e._breadcrumbs),t._tags=__assign$2({},e._tags),t._extra=__assign$2({},e._extra),t._contexts=__assign$2({},e._contexts),t._user=e._user,t._level=e._level,t._span=e._span,t._session=e._session,t._transactionName=e._transactionName,t._fingerprint=e._fingerprint,t._eventProcessors=__spread$1(e._eventProcessors),t._requestSession=e._requestSession),t},Scope.prototype.addScopeListener=function(e){this._scopeListeners.push(e)},Scope.prototype.addEventProcessor=function(e){return this._eventProcessors.push(e),this},Scope.prototype.setUser=function(e){return this._user=e||{},this._session&&this._session.update({user:e}),this._notifyScopeListeners(),this},Scope.prototype.getUser=function(){return this._user},Scope.prototype.getRequestSession=function(){return this._requestSession},Scope.prototype.setRequestSession=function(e){return this._requestSession=e,this},Scope.prototype.setTags=function(e){return this._tags=__assign$2(__assign$2({},this._tags),e),this._notifyScopeListeners(),this},Scope.prototype.setTag=function(e,t){var n;return this._tags=__assign$2(__assign$2({},this._tags),((n={})[e]=t,n)),this._notifyScopeListeners(),this},Scope.prototype.setExtras=function(e){return this._extra=__assign$2(__assign$2({},this._extra),e),this._notifyScopeListeners(),this},Scope.prototype.setExtra=function(e,t){var n;return this._extra=__assign$2(__assign$2({},this._extra),((n={})[e]=t,n)),this._notifyScopeListeners(),this},Scope.prototype.setFingerprint=function(e){return this._fingerprint=e,this._notifyScopeListeners(),this},Scope.prototype.setLevel=function(e){return this._level=e,this._notifyScopeListeners(),this},Scope.prototype.setTransactionName=function(e){return this._transactionName=e,this._notifyScopeListeners(),this},Scope.prototype.setTransaction=function(e){return this.setTransactionName(e)},Scope.prototype.setContext=function(e,t){var n;return null===t?delete this._contexts[e]:this._contexts=__assign$2(__assign$2({},this._contexts),((n={})[e]=t,n)),this._notifyScopeListeners(),this},Scope.prototype.setSpan=function(e){return this._span=e,this._notifyScopeListeners(),this},Scope.prototype.getSpan=function(){return this._span},Scope.prototype.getTransaction=function(){var e,t,n,r,o=this.getSpan();return(null===(e=o)||void 0===e?void 0:e.transaction)?null===(t=o)||void 0===t?void 0:t.transaction:(null===(r=null===(n=o)||void 0===n?void 0:n.spanRecorder)||void 0===r?void 0:r.spans[0])?o.spanRecorder.spans[0]:void 0},Scope.prototype.setSession=function(e){return e?this._session=e:delete this._session,this._notifyScopeListeners(),this},Scope.prototype.getSession=function(){return this._session},Scope.prototype.update=function(e){if(!e)return this;if("function"==typeof e){var t=e(this);return t instanceof Scope?t:this}return e instanceof Scope?(this._tags=__assign$2(__assign$2({},this._tags),e._tags),this._extra=__assign$2(__assign$2({},this._extra),e._extra),this._contexts=__assign$2(__assign$2({},this._contexts),e._contexts),e._user&&Object.keys(e._user).length&&(this._user=e._user),e._level&&(this._level=e._level),e._fingerprint&&(this._fingerprint=e._fingerprint),e._requestSession&&(this._requestSession=e._requestSession)):isPlainObject(e)&&(e=e,this._tags=__assign$2(__assign$2({},this._tags),e.tags),this._extra=__assign$2(__assign$2({},this._extra),e.extra),this._contexts=__assign$2(__assign$2({},this._contexts),e.contexts),e.user&&(this._user=e.user),e.level&&(this._level=e.level),e.fingerprint&&(this._fingerprint=e.fingerprint),e.requestSession&&(this._requestSession=e.requestSession)),this},Scope.prototype.clear=function(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._span=void 0,this._session=void 0,this._notifyScopeListeners(),this},Scope.prototype.addBreadcrumb=function(e,t){var n="number"==typeof t?Math.min(t,100):100;if(n<=0)return this;var r=__assign$2({timestamp:P()},e);return this._breadcrumbs=__spread$1(this._breadcrumbs,[r]).slice(-n),this._notifyScopeListeners(),this},Scope.prototype.clearBreadcrumbs=function(){return this._breadcrumbs=[],this._notifyScopeListeners(),this},Scope.prototype.applyToEvent=function(e,t){var n;if(this._extra&&Object.keys(this._extra).length&&(e.extra=__assign$2(__assign$2({},this._extra),e.extra)),this._tags&&Object.keys(this._tags).length&&(e.tags=__assign$2(__assign$2({},this._tags),e.tags)),this._user&&Object.keys(this._user).length&&(e.user=__assign$2(__assign$2({},this._user),e.user)),this._contexts&&Object.keys(this._contexts).length&&(e.contexts=__assign$2(__assign$2({},this._contexts),e.contexts)),this._level&&(e.level=this._level),this._transactionName&&(e.transaction=this._transactionName),this._span){e.contexts=__assign$2({trace:this._span.getTraceContext()},e.contexts);var r=null===(n=this._span.transaction)||void 0===n?void 0:n.name;r&&(e.tags=__assign$2({transaction:r},e.tags))}return this._applyFingerprint(e),e.breadcrumbs=__spread$1(e.breadcrumbs||[],this._breadcrumbs),e.breadcrumbs=e.breadcrumbs.length>0?e.breadcrumbs:void 0,this._notifyEventProcessors(__spread$1(getGlobalEventProcessors(),this._eventProcessors),e,t)},Scope.prototype._notifyEventProcessors=function(e,t,n,r){var o=this;return void 0===r&&(r=0),new O((function(i,s){var a=e[r];if(null===t||"function"!=typeof a)i(t);else{var c=a(__assign$2({},t),n);isThenable(c)?c.then((function(t){return o._notifyEventProcessors(e,t,n,r+1).then(i)})).then(null,s):o._notifyEventProcessors(e,c,n,r+1).then(i).then(null,s)}}))},Scope.prototype._notifyScopeListeners=function(){var e=this;this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach((function(t){t(e)})),this._notifyingListeners=!1)},Scope.prototype._applyFingerprint=function(e){e.fingerprint=e.fingerprint?Array.isArray(e.fingerprint)?e.fingerprint:[e.fingerprint]:[],this._fingerprint&&(e.fingerprint=e.fingerprint.concat(this._fingerprint)),e.fingerprint&&!e.fingerprint.length&&delete e.fingerprint},Scope}();function getGlobalEventProcessors(){var e=getGlobalObject();return e.__SENTRY__=e.__SENTRY__||{},e.__SENTRY__.globalEventProcessors=e.__SENTRY__.globalEventProcessors||[],e.__SENTRY__.globalEventProcessors}function addGlobalEventProcessor(e){getGlobalEventProcessors().push(e)}var R=function(){function Session(e){this.errors=0,this.sid=uuid4(),this.duration=0,this.status=t.Ok,this.init=!0,this.ignoreDuration=!1;var n=I();this.timestamp=n,this.started=n,e&&this.update(e)}return Session.prototype.update=function(e){if(void 0===e&&(e={}),e.user&&(!this.ipAddress&&e.user.ip_address&&(this.ipAddress=e.user.ip_address),this.did||e.did||(this.did=e.user.id||e.user.email||e.user.username)),this.timestamp=e.timestamp||I(),e.ignoreDuration&&(this.ignoreDuration=e.ignoreDuration),e.sid&&(this.sid=32===e.sid.length?e.sid:uuid4()),void 0!==e.init&&(this.init=e.init),!this.did&&e.did&&(this.did=""+e.did),"number"==typeof e.started&&(this.started=e.started),this.ignoreDuration)this.duration=void 0;else if("number"==typeof e.duration)this.duration=e.duration;else{var t=this.timestamp-this.started;this.duration=t>=0?t:0}e.release&&(this.release=e.release),e.environment&&(this.environment=e.environment),!this.ipAddress&&e.ipAddress&&(this.ipAddress=e.ipAddress),!this.userAgent&&e.userAgent&&(this.userAgent=e.userAgent),"number"==typeof e.errors&&(this.errors=e.errors),e.status&&(this.status=e.status)},Session.prototype.close=function(e){e?this.update({status:e}):this.status===t.Ok?this.update({status:t.Exited}):this.update()},Session.prototype.toJSON=function(){return dropUndefinedKeys({sid:""+this.sid,init:this.init,started:new Date(1e3*this.started).toISOString(),timestamp:new Date(1e3*this.timestamp).toISOString(),status:this.status,errors:this.errors,did:"number"==typeof this.did||"string"==typeof this.did?""+this.did:void 0,duration:this.duration,attrs:dropUndefinedKeys({release:this.release,environment:this.environment,ip_address:this.ipAddress,user_agent:this.userAgent})})},Session}(),D=function(){function Hub(e,t,n){void 0===t&&(t=new H),void 0===n&&(n=4),this._version=n,this._stack=[{}],this.getStackTop().scope=t,this.bindClient(e)}return Hub.prototype.isOlderThan=function(e){return this._version<e},Hub.prototype.bindClient=function(e){this.getStackTop().client=e,e&&e.setupIntegrations&&e.setupIntegrations()},Hub.prototype.pushScope=function(){var e=H.clone(this.getScope());return this.getStack().push({client:this.getClient(),scope:e}),e},Hub.prototype.popScope=function(){return!(this.getStack().length<=1)&&!!this.getStack().pop()},Hub.prototype.withScope=function(e){var t=this.pushScope();try{e(t)}finally{this.popScope()}},Hub.prototype.getClient=function(){return this.getStackTop().client},Hub.prototype.getScope=function(){return this.getStackTop().scope},Hub.prototype.getStack=function(){return this._stack},Hub.prototype.getStackTop=function(){return this._stack[this._stack.length-1]},Hub.prototype.captureException=function(e,t){var n=this._lastEventId=uuid4(),r=t;if(!t){var o=void 0;try{throw new Error("Sentry syntheticException")}catch(e){o=e}r={originalException:e,syntheticException:o}}return this._invokeClient("captureException",e,__assign$2(__assign$2({},r),{event_id:n})),n},Hub.prototype.captureMessage=function(e,t,n){var r=this._lastEventId=uuid4(),o=n;if(!n){var i=void 0;try{throw new Error(e)}catch(e){i=e}o={originalException:e,syntheticException:i}}return this._invokeClient("captureMessage",e,t,__assign$2(__assign$2({},o),{event_id:r})),r},Hub.prototype.captureEvent=function(e,t){var n=this._lastEventId=uuid4();return this._invokeClient("captureEvent",e,__assign$2(__assign$2({},t),{event_id:n})),n},Hub.prototype.lastEventId=function(){return this._lastEventId},Hub.prototype.addBreadcrumb=function(e,t){var n=this.getStackTop(),r=n.scope,o=n.client;if(r&&o){var i=o.getOptions&&o.getOptions()||{},s=i.beforeBreadcrumb,a=void 0===s?null:s,c=i.maxBreadcrumbs,u=void 0===c?100:c;if(!(u<=0)){var l=P(),p=__assign$2({timestamp:l},e),d=a?consoleSandbox((function(){return a(p,t)})):p;null!==d&&r.addBreadcrumb(d,u)}}},Hub.prototype.setUser=function(e){var t=this.getScope();t&&t.setUser(e)},Hub.prototype.setTags=function(e){var t=this.getScope();t&&t.setTags(e)},Hub.prototype.setExtras=function(e){var t=this.getScope();t&&t.setExtras(e)},Hub.prototype.setTag=function(e,t){var n=this.getScope();n&&n.setTag(e,t)},Hub.prototype.setExtra=function(e,t){var n=this.getScope();n&&n.setExtra(e,t)},Hub.prototype.setContext=function(e,t){var n=this.getScope();n&&n.setContext(e,t)},Hub.prototype.configureScope=function(e){var t=this.getStackTop(),n=t.scope,r=t.client;n&&r&&e(n)},Hub.prototype.run=function(e){var t=makeMain(this);try{e(this)}finally{makeMain(t)}},Hub.prototype.getIntegration=function(e){var t=this.getClient();if(!t)return null;try{return t.getIntegration(e)}catch(t){return h.warn("Cannot retrieve integration "+e.id+" from the current Hub"),null}},Hub.prototype.startSpan=function(e){return this._callExtensionMethod("startSpan",e)},Hub.prototype.startTransaction=function(e,t){return this._callExtensionMethod("startTransaction",e,t)},Hub.prototype.traceHeaders=function(){return this._callExtensionMethod("traceHeaders")},Hub.prototype.captureSession=function(e){if(void 0===e&&(e=!1),e)return this.endSession();this._sendSessionUpdate()},Hub.prototype.endSession=function(){var e,t,n,r,o;null===(n=null===(t=null===(e=this.getStackTop())||void 0===e?void 0:e.scope)||void 0===t?void 0:t.getSession())||void 0===n||n.close(),this._sendSessionUpdate(),null===(o=null===(r=this.getStackTop())||void 0===r?void 0:r.scope)||void 0===o||o.setSession()},Hub.prototype.startSession=function(e){var n=this.getStackTop(),r=n.scope,o=n.client,i=o&&o.getOptions()||{},s=i.release,a=i.environment,c=(getGlobalObject().navigator||{}).userAgent,u=new R(__assign$2(__assign$2(__assign$2({release:s,environment:a},r&&{user:r.getUser()}),c&&{userAgent:c}),e));if(r){var l=r.getSession&&r.getSession();l&&l.status===t.Ok&&l.update({status:t.Exited}),this.endSession(),r.setSession(u)}return u},Hub.prototype._sendSessionUpdate=function(){var e=this.getStackTop(),t=e.scope,n=e.client;if(t){var r=t.getSession&&t.getSession();r&&n&&n.captureSession&&n.captureSession(r)}},Hub.prototype._invokeClient=function(e){for(var t,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var o=this.getStackTop(),i=o.scope,s=o.client;s&&s[e]&&(t=s)[e].apply(t,__spread$1(n,[i]))},Hub.prototype._callExtensionMethod=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=getMainCarrier(),o=r.__SENTRY__;if(o&&o.extensions&&"function"==typeof o.extensions[e])return o.extensions[e].apply(this,t);h.warn("Extension method "+e+" couldn't be found, doing nothing.")},Hub}();function getMainCarrier(){var e=getGlobalObject();return e.__SENTRY__=e.__SENTRY__||{extensions:{},hub:void 0},e}function makeMain(e){var t=getMainCarrier(),n=getHubFromCarrier(t);return setHubOnCarrier(t,e),n}function getCurrentHub(){var e=getMainCarrier();return hasHubOnCarrier(e)&&!getHubFromCarrier(e).isOlderThan(4)||setHubOnCarrier(e,new D),isNodeEnv()?function getHubFromActiveDomain(e){var t,n,r;try{var o=null===(r=null===(n=null===(t=getMainCarrier().__SENTRY__)||void 0===t?void 0:t.extensions)||void 0===n?void 0:n.domain)||void 0===r?void 0:r.active;if(!o)return getHubFromCarrier(e);if(!hasHubOnCarrier(o)||getHubFromCarrier(o).isOlderThan(4)){var i=getHubFromCarrier(e).getStackTop();setHubOnCarrier(o,new D(i.client,H.clone(i.scope)))}return getHubFromCarrier(o)}catch(t){return getHubFromCarrier(e)}}(e):getHubFromCarrier(e)}function hasHubOnCarrier(e){return!!(e&&e.__SENTRY__&&e.__SENTRY__.hub)}function getHubFromCarrier(e){return e&&e.__SENTRY__&&e.__SENTRY__.hub||(e.__SENTRY__=e.__SENTRY__||{},e.__SENTRY__.hub=new D),e.__SENTRY__.hub}function setHubOnCarrier(e,t){return!!e&&(e.__SENTRY__=e.__SENTRY__||{},e.__SENTRY__.hub=t,!0)}function callOnHub(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=getCurrentHub();if(r&&r[e])return r[e].apply(r,__spread$2(t));throw new Error("No hub defined or "+e+" was not found on the hub, please open a bug report.")}function captureException(e,t){var n;try{throw new Error("Sentry syntheticException")}catch(e){n=e}return callOnHub("captureException",e,{captureContext:t,originalException:e,syntheticException:n})}function addBreadcrumb(e){callOnHub("addBreadcrumb",e)}function withScope(e){callOnHub("withScope",e)}var B=function(){function API(e,t,n){void 0===t&&(t={}),this.dsn=e,this._dsnObject=new u(e),this.metadata=t,this._tunnel=n}return API.prototype.getDsn=function(){return this._dsnObject},API.prototype.forceEnvelope=function(){return!!this._tunnel},API.prototype.getBaseApiEndpoint=function(){var e=this.getDsn(),t=e.protocol?e.protocol+":":"",n=e.port?":"+e.port:"";return t+"//"+e.host+n+(e.path?"/"+e.path:"")+"/api/"},API.prototype.getStoreEndpoint=function(){return this._getIngestEndpoint("store")},API.prototype.getStoreEndpointWithUrlEncodedAuth=function(){return this.getStoreEndpoint()+"?"+this._encodedAuth()},API.prototype.getEnvelopeEndpointWithUrlEncodedAuth=function(){return this.forceEnvelope()?this._tunnel:this._getEnvelopeEndpoint()+"?"+this._encodedAuth()},API.prototype.getStoreEndpointPath=function(){var e=this.getDsn();return(e.path?"/"+e.path:"")+"/api/"+e.projectId+"/store/"},API.prototype.getRequestHeaders=function(e,t){var n=this.getDsn(),r=["Sentry sentry_version=7"];return r.push("sentry_client="+e+"/"+t),r.push("sentry_key="+n.publicKey),n.pass&&r.push("sentry_secret="+n.pass),{"Content-Type":"application/json","X-Sentry-Auth":r.join(", ")}},API.prototype.getReportDialogEndpoint=function(e){void 0===e&&(e={});var t=this.getDsn(),n=this.getBaseApiEndpoint()+"embed/error-page/",r=[];for(var o in r.push("dsn="+t.toString()),e)if("dsn"!==o)if("user"===o){if(!e.user)continue;e.user.name&&r.push("name="+encodeURIComponent(e.user.name)),e.user.email&&r.push("email="+encodeURIComponent(e.user.email))}else r.push(encodeURIComponent(o)+"="+encodeURIComponent(e[o]));return r.length?n+"?"+r.join("&"):n},API.prototype._getEnvelopeEndpoint=function(){return this._getIngestEndpoint("envelope")},API.prototype._getIngestEndpoint=function(e){return this._tunnel?this._tunnel:""+this.getBaseApiEndpoint()+this.getDsn().projectId+"/"+e+"/"},API.prototype._encodedAuth=function(){return function urlEncode(e){return Object.keys(e).map((function(t){return encodeURIComponent(t)+"="+encodeURIComponent(e[t])})).join("&")}({sentry_key:this.getDsn().publicKey,sentry_version:"7"})},API}(),__assign=function(){return(__assign=Object.assign||function __assign(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function __read(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s}function __spread(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(__read(arguments[t]));return e}var N=[];function filterDuplicates(e){return e.reduce((function(e,t){return e.every((function(e){return t.name!==e.name}))&&e.push(t),e}),[])}function setupIntegrations(e){var t={};return function getIntegrationsToSetup(e){var t=e.defaultIntegrations&&__spread(e.defaultIntegrations)||[],n=e.integrations,r=__spread(filterDuplicates(t));Array.isArray(n)?r=__spread(r.filter((function(e){return n.every((function(t){return t.name!==e.name}))})),filterDuplicates(n)):"function"==typeof n&&(r=n(r),r=Array.isArray(r)?r:[r]);var o=r.map((function(e){return e.name})),i="Debug";return-1!==o.indexOf(i)&&r.push.apply(r,__spread(r.splice(o.indexOf(i),1))),r}(e).forEach((function(e){t[e.name]=e,function setupIntegration(e){-1===N.indexOf(e.name)&&(e.setupOnce(addGlobalEventProcessor,getCurrentHub),N.push(e.name),h.log("Integration installed: "+e.name))}(e)})),t}var L=function(){function BaseClient(e,t){this._integrations={},this._processing=0,this._backend=new e(t),this._options=t,t.dsn&&(this._dsn=new u(t.dsn))}return BaseClient.prototype.captureException=function(e,t,n){var r=this,o=t&&t.event_id;return this._process(this._getBackend().eventFromException(e,t).then((function(e){return r._captureEvent(e,t,n)})).then((function(e){o=e}))),o},BaseClient.prototype.captureMessage=function(e,t,n,r){var o=this,i=n&&n.event_id,s=isPrimitive(e)?this._getBackend().eventFromMessage(String(e),t,n):this._getBackend().eventFromException(e,n);return this._process(s.then((function(e){return o._captureEvent(e,n,r)})).then((function(e){i=e}))),i},BaseClient.prototype.captureEvent=function(e,t,n){var r=t&&t.event_id;return this._process(this._captureEvent(e,t,n).then((function(e){r=e}))),r},BaseClient.prototype.captureSession=function(e){this._isEnabled()?"string"!=typeof e.release?h.warn("Discarded session because of missing or non-string release"):(this._sendSession(e),e.update({init:!1})):h.warn("SDK not enabled, will not capture session.")},BaseClient.prototype.getDsn=function(){return this._dsn},BaseClient.prototype.getOptions=function(){return this._options},BaseClient.prototype.flush=function(e){var t=this;return this._isClientProcessing(e).then((function(n){return t._getBackend().getTransport().close(e).then((function(e){return n&&e}))}))},BaseClient.prototype.close=function(e){var t=this;return this.flush(e).then((function(e){return t.getOptions().enabled=!1,e}))},BaseClient.prototype.setupIntegrations=function(){this._isEnabled()&&(this._integrations=setupIntegrations(this._options))},BaseClient.prototype.getIntegration=function(e){try{return this._integrations[e.id]||null}catch(t){return h.warn("Cannot retrieve integration "+e.id+" from the current Client"),null}},BaseClient.prototype._updateSessionFromEvent=function(e,n){var r,o,i=!1,s=!1,a=n.exception&&n.exception.values;if(a){s=!0;try{for(var c=function __values(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(a),u=c.next();!u.done;u=c.next()){var l=u.value.mechanism;if(l&&!1===l.handled){i=!0;break}}}catch(e){r={error:e}}finally{try{u&&!u.done&&(o=c.return)&&o.call(c)}finally{if(r)throw r.error}}}var p=e.status===t.Ok;(p&&0===e.errors||p&&i)&&(e.update(__assign(__assign({},i&&{status:t.Crashed}),{errors:e.errors||Number(s||i)})),this.captureSession(e))},BaseClient.prototype._sendSession=function(e){this._getBackend().sendSession(e)},BaseClient.prototype._isClientProcessing=function(e){var t=this;return new O((function(n){var r=0,o=setInterval((function(){0==t._processing?(clearInterval(o),n(!0)):(r+=1,e&&r>=e&&(clearInterval(o),n(!1)))}),1)}))},BaseClient.prototype._getBackend=function(){return this._backend},BaseClient.prototype._isEnabled=function(){return!1!==this.getOptions().enabled&&void 0!==this._dsn},BaseClient.prototype._prepareEvent=function(e,t,n){var r=this,o=this.getOptions().normalizeDepth,i=void 0===o?3:o,s=__assign(__assign({},e),{event_id:e.event_id||(n&&n.event_id?n.event_id:uuid4()),timestamp:e.timestamp||P()});this._applyClientOptions(s),this._applyIntegrationsMetadata(s);var a=t;n&&n.captureContext&&(a=H.clone(a).update(n.captureContext));var c=O.resolve(s);return a&&(c=a.applyToEvent(s,n)),c.then((function(e){return"number"==typeof i&&i>0?r._normalizeEvent(e,i):e}))},BaseClient.prototype._normalizeEvent=function(e,t){if(!e)return null;var n=__assign(__assign(__assign(__assign(__assign({},e),e.breadcrumbs&&{breadcrumbs:e.breadcrumbs.map((function(e){return __assign(__assign({},e),e.data&&{data:normalize(e.data,t)})}))}),e.user&&{user:normalize(e.user,t)}),e.contexts&&{contexts:normalize(e.contexts,t)}),e.extra&&{extra:normalize(e.extra,t)});return e.contexts&&e.contexts.trace&&(n.contexts.trace=e.contexts.trace),n},BaseClient.prototype._applyClientOptions=function(e){var t=this.getOptions(),n=t.environment,r=t.release,o=t.dist,i=t.maxValueLength,s=void 0===i?250:i;"environment"in e||(e.environment="environment"in t?n:"production"),void 0===e.release&&void 0!==r&&(e.release=r),void 0===e.dist&&void 0!==o&&(e.dist=o),e.message&&(e.message=truncate(e.message,s));var a=e.exception&&e.exception.values&&e.exception.values[0];a&&a.value&&(a.value=truncate(a.value,s));var c=e.request;c&&c.url&&(c.url=truncate(c.url,s))},BaseClient.prototype._applyIntegrationsMetadata=function(e){var t=Object.keys(this._integrations);t.length>0&&(e.sdk=e.sdk||{},e.sdk.integrations=__spread(e.sdk.integrations||[],t))},BaseClient.prototype._sendEvent=function(e){this._getBackend().sendEvent(e)},BaseClient.prototype._captureEvent=function(e,t,n){return this._processEvent(e,t,n).then((function(e){return e.event_id}),(function(e){h.error(e)}))},BaseClient.prototype._processEvent=function(e,t,n){var r=this,o=this.getOptions(),i=o.beforeSend,a=o.sampleRate;if(!this._isEnabled())return O.reject(new s("SDK not enabled, will not capture event."));var c="transaction"===e.type;return!c&&"number"==typeof a&&Math.random()>a?O.reject(new s("Discarding event because it's not included in the random sample (sampling rate = "+a+")")):this._prepareEvent(e,n,t).then((function(e){if(null===e)throw new s("An event processor returned null, will not send event.");if(t&&t.data&&!0===t.data.__sentry__||c||!i)return e;var n=i(e,t);return r._ensureBeforeSendRv(n)})).then((function(e){if(null===e)throw new s("`beforeSend` returned `null`, will not send event.");var t=n&&n.getSession&&n.getSession();return!c&&t&&r._updateSessionFromEvent(t,e),r._sendEvent(e),e})).then(null,(function(e){if(e instanceof s)throw e;throw r.captureException(e,{data:{__sentry__:!0},originalException:e}),new s("Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.\nReason: "+e)}))},BaseClient.prototype._process=function(e){var t=this;this._processing+=1,e.then((function(e){return t._processing-=1,e}),(function(e){return t._processing-=1,e}))},BaseClient.prototype._ensureBeforeSendRv=function(e){var t="`beforeSend` method has to return `null` or a valid event.";if(isThenable(e))return e.then((function(e){if(!isPlainObject(e)&&null!==e)throw new s(t);return e}),(function(e){throw new s("beforeSend rejected with "+e)}));if(!isPlainObject(e)&&null!==e)throw new s(t);return e},BaseClient}(),A=function(){function NoopTransport(){}return NoopTransport.prototype.sendEvent=function(e){return O.resolve({reason:"NoopTransport: Event has been skipped because no Dsn is configured.",status:o.Skipped})},NoopTransport.prototype.close=function(e){return O.resolve(!0)},NoopTransport}(),U=function(){function BaseBackend(e){this._options=e,this._options.dsn||h.warn("No DSN provided, backend will not do anything."),this._transport=this._setupTransport()}return BaseBackend.prototype.eventFromException=function(e,t){throw new s("Backend has to implement `eventFromException` method")},BaseBackend.prototype.eventFromMessage=function(e,t,n){throw new s("Backend has to implement `eventFromMessage` method")},BaseBackend.prototype.sendEvent=function(e){this._transport.sendEvent(e).then(null,(function(e){h.error("Error while sending event: "+e)}))},BaseBackend.prototype.sendSession=function(e){this._transport.sendSession?this._transport.sendSession(e).then(null,(function(e){h.error("Error while sending session: "+e)})):h.warn("Dropping session because custom transport doesn't implement sendSession")},BaseBackend.prototype.getTransport=function(){return this._transport},BaseBackend.prototype._setupTransport=function(){return new A},BaseBackend}();function getSdkMetadataForEnvelopeHeader(e){if(e.metadata&&e.metadata.sdk){var t=e.metadata.sdk;return{name:t.name,version:t.version}}}function enhanceEventWithSdkInfo(e,t){return t?(e.sdk=e.sdk||{},e.sdk.name=e.sdk.name||t.name,e.sdk.version=e.sdk.version||t.version,e.sdk.integrations=__spread(e.sdk.integrations||[],t.integrations||[]),e.sdk.packages=__spread(e.sdk.packages||[],t.packages||[]),e):e}function sessionToSentryRequest(e,t){var n=getSdkMetadataForEnvelopeHeader(t),r="aggregates"in e?"sessions":"session";return{body:JSON.stringify(__assign(__assign({sent_at:(new Date).toISOString()},n&&{sdk:n}),t.forceEnvelope()&&{dsn:t.getDsn().toString()}))+"\n"+JSON.stringify({type:r})+"\n"+JSON.stringify(e),type:r,url:t.getEnvelopeEndpointWithUrlEncodedAuth()}}function eventToSentryRequest(e,t){var n=getSdkMetadataForEnvelopeHeader(t),r=e.type||"event",o="transaction"===r||t.forceEnvelope(),i=e.debug_meta||{},s=i.transactionSampling,a=function __rest(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(i,["transactionSampling"]),c=s||{},u=c.method,l=c.rate;0===Object.keys(a).length?delete e.debug_meta:e.debug_meta=a;var p={body:JSON.stringify(n?enhanceEventWithSdkInfo(e,t.metadata.sdk):e),type:r,url:o?t.getEnvelopeEndpointWithUrlEncodedAuth():t.getStoreEndpointWithUrlEncodedAuth()};if(o){var d=JSON.stringify(__assign(__assign({event_id:e.event_id,sent_at:(new Date).toISOString()},n&&{sdk:n}),t.forceEnvelope()&&{dsn:t.getDsn().toString()}))+"\n"+JSON.stringify({type:r,sample_rates:[{id:u,rate:l}]})+"\n"+p.body;p.body=d}return p}var M,G="6.8.0",q=function(){function FunctionToString(){this.name=FunctionToString.id}return FunctionToString.prototype.setupOnce=function(){M=Function.prototype.toString,Function.prototype.toString=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=this.__sentry_original__||this;return M.apply(n,e)}},FunctionToString.id="FunctionToString",FunctionToString}(),$=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/],z=function(){function InboundFilters(e){void 0===e&&(e={}),this._options=e,this.name=InboundFilters.id}return InboundFilters.prototype.setupOnce=function(){addGlobalEventProcessor((function(e){var t=getCurrentHub();if(!t)return e;var n=t.getIntegration(InboundFilters);if(n){var r=t.getClient(),o=r?r.getOptions():{},i="function"==typeof n._mergeOptions?n._mergeOptions(o):{};return"function"!=typeof n._shouldDropEvent?e:n._shouldDropEvent(e,i)?null:e}return e}))},InboundFilters.prototype._shouldDropEvent=function(e,t){return this._isSentryError(e,t)?(h.warn("Event dropped due to being internal Sentry Error.\nEvent: "+getEventDescription(e)),!0):this._isIgnoredError(e,t)?(h.warn("Event dropped due to being matched by `ignoreErrors` option.\nEvent: "+getEventDescription(e)),!0):this._isDeniedUrl(e,t)?(h.warn("Event dropped due to being matched by `denyUrls` option.\nEvent: "+getEventDescription(e)+".\nUrl: "+this._getEventFilterUrl(e)),!0):!this._isAllowedUrl(e,t)&&(h.warn("Event dropped due to not being matched by `allowUrls` option.\nEvent: "+getEventDescription(e)+".\nUrl: "+this._getEventFilterUrl(e)),!0)},InboundFilters.prototype._isSentryError=function(e,t){if(!t.ignoreInternal)return!1;try{return e&&e.exception&&e.exception.values&&e.exception.values[0]&&"SentryError"===e.exception.values[0].type||!1}catch(e){return!1}},InboundFilters.prototype._isIgnoredError=function(e,t){return!(!t.ignoreErrors||!t.ignoreErrors.length)&&this._getPossibleEventMessages(e).some((function(e){return t.ignoreErrors.some((function(t){return isMatchingPattern(e,t)}))}))},InboundFilters.prototype._isDeniedUrl=function(e,t){if(!t.denyUrls||!t.denyUrls.length)return!1;var n=this._getEventFilterUrl(e);return!!n&&t.denyUrls.some((function(e){return isMatchingPattern(n,e)}))},InboundFilters.prototype._isAllowedUrl=function(e,t){if(!t.allowUrls||!t.allowUrls.length)return!0;var n=this._getEventFilterUrl(e);return!n||t.allowUrls.some((function(e){return isMatchingPattern(n,e)}))},InboundFilters.prototype._mergeOptions=function(e){return void 0===e&&(e={}),{allowUrls:__spread(this._options.whitelistUrls||[],this._options.allowUrls||[],e.whitelistUrls||[],e.allowUrls||[]),denyUrls:__spread(this._options.blacklistUrls||[],this._options.denyUrls||[],e.blacklistUrls||[],e.denyUrls||[]),ignoreErrors:__spread(this._options.ignoreErrors||[],e.ignoreErrors||[],$),ignoreInternal:void 0===this._options.ignoreInternal||this._options.ignoreInternal}},InboundFilters.prototype._getPossibleEventMessages=function(e){if(e.message)return[e.message];if(e.exception)try{var t=e.exception.values&&e.exception.values[0]||{},n=t.type,r=void 0===n?"":n,o=t.value,i=void 0===o?"":o;return[""+i,r+": "+i]}catch(t){return h.error("Cannot extract message for event "+getEventDescription(e)),[]}return[]},InboundFilters.prototype._getEventFilterUrl=function(e){try{if(e.stacktrace){var t=e.stacktrace.frames;return t&&t[t.length-1].filename||null}if(e.exception){var n=e.exception.values&&e.exception.values[0].stacktrace&&e.exception.values[0].stacktrace.frames;return n&&n[n.length-1].filename||null}return null}catch(t){return h.error("Cannot extract url for event "+getEventDescription(e)),null}},InboundFilters.id="InboundFilters",InboundFilters}(),W="?",Y=/^\s*at (?:(.*?) ?\()?((?:file|https?|blob|chrome-extension|address|native|eval|webpack|<anonymous>|[-a-z]+:|.*bundle|\/).*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,K=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:file|https?|blob|chrome|webpack|resource|moz-extension|capacitor).*?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,X=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i,J=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,V=/\((\S*)(?::(\d+))(?::(\d+))\)/,Q=/Minified React error #\d+;/i;function computeStackTrace(e){var t=null,n=0;e&&("number"==typeof e.framesToPop?n=e.framesToPop:Q.test(e.message)&&(n=1));try{if(t=function computeStackTraceFromStacktraceProp(e){if(!e||!e.stacktrace)return null;for(var t,n=e.stacktrace,r=/ line (\d+).*script (?:in )?(\S+)(?:: in function (\S+))?$/i,o=/ line (\d+), column (\d+)\s*(?:in (?:<anonymous function: ([^>]+)>|([^)]+))\((.*)\))? in (.*):\s*$/i,i=n.split("\n"),s=[],a=0;a<i.length;a+=2){var c=null;(t=r.exec(i[a]))?c={url:t[2],func:t[3],args:[],line:+t[1],column:null}:(t=o.exec(i[a]))&&(c={url:t[6],func:t[3]||t[4],args:t[5]?t[5].split(","):[],line:+t[1],column:+t[2]}),c&&(!c.func&&c.line&&(c.func=W),s.push(c))}if(!s.length)return null;return{message:extractMessage(e),name:e.name,stack:s}}(e))return popFrames(t,n)}catch(e){}try{if(t=function computeStackTraceFromStackProp(e){if(!e||!e.stack)return null;for(var t,n,r,o=[],i=e.stack.split("\n"),s=0;s<i.length;++s){if(n=Y.exec(i[s])){var a=n[2]&&0===n[2].indexOf("native");n[2]&&0===n[2].indexOf("eval")&&(t=V.exec(n[2]))&&(n[2]=t[1],n[3]=t[2],n[4]=t[3]);var c=n[2]&&0===n[2].indexOf("address at ")?n[2].substr("address at ".length):n[2],u=n[1]||W,l=-1!==u.indexOf("safari-extension"),p=-1!==u.indexOf("safari-web-extension");(l||p)&&(u=-1!==u.indexOf("@")?u.split("@")[0]:W,c=l?"safari-extension:"+c:"safari-web-extension:"+c),r={url:c,func:u,args:a?[n[2]]:[],line:n[3]?+n[3]:null,column:n[4]?+n[4]:null}}else if(n=X.exec(i[s]))r={url:n[2],func:n[1]||W,args:[],line:+n[3],column:n[4]?+n[4]:null};else{if(!(n=K.exec(i[s])))continue;n[3]&&n[3].indexOf(" > eval")>-1&&(t=J.exec(n[3]))?(n[1]=n[1]||"eval",n[3]=t[1],n[4]=t[2],n[5]=""):0!==s||n[5]||void 0===e.columnNumber||(o[0].column=e.columnNumber+1),r={url:n[3],func:n[1]||W,args:n[2]?n[2].split(","):[],line:n[4]?+n[4]:null,column:n[5]?+n[5]:null}}!r.func&&r.line&&(r.func=W),o.push(r)}if(!o.length)return null;return{message:extractMessage(e),name:e.name,stack:o}}(e))return popFrames(t,n)}catch(e){}return{message:extractMessage(e),name:e&&e.name,stack:[],failed:!0}}function popFrames(e,t){try{return __assign$3(__assign$3({},e),{stack:e.stack.slice(t)})}catch(t){return e}}function extractMessage(e){var t=e&&e.message;return t?t.error&&"string"==typeof t.error.message?t.error.message:t:"No error message"}function exceptionFromStacktrace(e){var t=prepareFramesForEvent(e.stack),n={type:e.name,value:e.message};return t&&t.length&&(n.stacktrace={frames:t}),void 0===n.type&&""===n.value&&(n.value="Unrecoverable error caught"),n}function eventFromStacktrace(e){return{exception:{values:[exceptionFromStacktrace(e)]}}}function prepareFramesForEvent(e){if(!e||!e.length)return[];var t=e,n=t[0].func||"",r=t[t.length-1].func||"";return-1===n.indexOf("captureMessage")&&-1===n.indexOf("captureException")||(t=t.slice(1)),-1!==r.indexOf("sentryWrapped")&&(t=t.slice(0,-1)),t.slice(0,50).map((function(e){return{colno:null===e.column?void 0:e.column,filename:e.url||t[0].url,function:e.func||"?",in_app:!0,lineno:null===e.line?void 0:e.line}})).reverse()}function eventFromUnknownInput(e,t,n){var r;if(void 0===n&&(n={}),isErrorEvent(e)&&e.error)return r=eventFromStacktrace(computeStackTrace(e=e.error));if(isDOMError(e)||function isDOMException(e){return"[object DOMException]"===Object.prototype.toString.call(e)}(e)){var o=e,i=o.name||(isDOMError(o)?"DOMError":"DOMException"),s=o.message?i+": "+o.message:i;return addExceptionTypeValue(r=eventFromString(s,t,n),s),"code"in o&&(r.tags=__assign$3(__assign$3({},r.tags),{"DOMException.code":""+o.code})),r}return isError(e)?r=eventFromStacktrace(computeStackTrace(e)):isPlainObject(e)||isEvent(e)?(addExceptionMechanism(r=function eventFromPlainObject(e,t,n){var r={exception:{values:[{type:isEvent(e)?e.constructor.name:n?"UnhandledRejection":"Error",value:"Non-Error "+(n?"promise rejection":"exception")+" captured with keys: "+extractExceptionKeysForMessage(e)}]},extra:{__serialized__:normalizeToSize(e)}};if(t){var o=prepareFramesForEvent(computeStackTrace(t).stack);r.stacktrace={frames:o}}return r}(e,t,n.rejection),{synthetic:!0}),r):(addExceptionTypeValue(r=eventFromString(e,t,n),""+e,void 0),addExceptionMechanism(r,{synthetic:!0}),r)}function eventFromString(e,t,n){void 0===n&&(n={});var r={message:e};if(n.attachStacktrace&&t){var o=prepareFramesForEvent(computeStackTrace(t).stack);r.stacktrace={frames:o}}return r}var Z={event:"error",transaction:"transaction",session:"session",attachment:"attachment"},ee=function(){function BaseTransport(e){this.options=e,this._buffer=new T(30),this._rateLimits={},this._api=new B(e.dsn,e._metadata,e.tunnel),this.url=this._api.getStoreEndpointWithUrlEncodedAuth()}return BaseTransport.prototype.sendEvent=function(e){throw new s("Transport Class has to implement `sendEvent` method")},BaseTransport.prototype.close=function(e){return this._buffer.drain(e)},BaseTransport.prototype._handleResponse=function(e){var t=e.requestType,n=e.response,r=e.headers,i=e.resolve,s=e.reject,a=o.fromHttpCode(n.status);this._handleRateLimit(r)&&h.warn("Too many "+t+" requests, backing off until: "+this._disabledUntil(t)),a!==o.Success?s(n):i({status:a})},BaseTransport.prototype._disabledUntil=function(e){var t=Z[e];return this._rateLimits[t]||this._rateLimits.all},BaseTransport.prototype._isRateLimited=function(e){return this._disabledUntil(e)>new Date(Date.now())},BaseTransport.prototype._handleRateLimit=function(e){var t,n,r,o,i=Date.now(),s=e["x-sentry-rate-limits"],a=e["retry-after"];if(s){try{for(var c=__values$2(s.trim().split(",")),u=c.next();!u.done;u=c.next()){var l=u.value.split(":",2),p=parseInt(l[0],10),d=1e3*(isNaN(p)?60:p);try{for(var f=(r=void 0,__values$2(l[1].split(";"))),h=f.next();!h.done;h=f.next()){var v=h.value;this._rateLimits[v||"all"]=new Date(i+d)}}catch(e){r={error:e}}finally{try{h&&!h.done&&(o=f.return)&&o.call(f)}finally{if(r)throw r.error}}}}catch(e){t={error:e}}finally{try{u&&!u.done&&(n=c.return)&&n.call(c)}finally{if(t)throw t.error}}return!0}return!!a&&(this._rateLimits.all=new Date(i+function parseRetryAfterHeader(e,t){if(!t)return 6e4;var n=parseInt(""+t,10);if(!isNaN(n))return 1e3*n;var r=Date.parse(""+t);return isNaN(r)?6e4:r-e}(i,a)),!0)},BaseTransport}();var te=function(e){function FetchTransport(t,n){void 0===n&&(n=function getNativeFetchImplementation(){var e,t,n=getGlobalObject();if(isNativeFetch(n.fetch))return n.fetch.bind(n);var r=n.document,o=n.fetch;if("function"==typeof(null===(e=r)||void 0===e?void 0:e.createElement))try{var i=r.createElement("iframe");i.hidden=!0,r.head.appendChild(i),(null===(t=i.contentWindow)||void 0===t?void 0:t.fetch)&&(o=i.contentWindow.fetch),r.head.removeChild(i)}catch(e){h.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",e)}return o.bind(n)}());var r=e.call(this,t)||this;return r._fetch=n,r}return __extends$1(FetchTransport,e),FetchTransport.prototype.sendEvent=function(e){return this._sendRequest(eventToSentryRequest(e,this._api),e)},FetchTransport.prototype.sendSession=function(e){return this._sendRequest(sessionToSentryRequest(e,this._api),e)},FetchTransport.prototype._sendRequest=function(e,t){var n=this;if(this._isRateLimited(e.type))return Promise.reject({event:t,type:e.type,reason:"Transport for "+e.type+" requests locked till "+this._disabledUntil(e.type)+" due to too many requests.",status:429});var r={body:e.body,method:"POST",referrerPolicy:supportsReferrerPolicy()?"origin":""};return void 0!==this.options.fetchParameters&&Object.assign(r,this.options.fetchParameters),void 0!==this.options.headers&&(r.headers=this.options.headers),this._buffer.add((function(){return new O((function(t,o){n._fetch(e.url,r).then((function(r){var i={"x-sentry-rate-limits":r.headers.get("X-Sentry-Rate-Limits"),"retry-after":r.headers.get("Retry-After")};n._handleResponse({requestType:e.type,response:r,headers:i,resolve:t,reject:o})})).catch(o)}))}))},FetchTransport}(ee),ne=function(e){function XHRTransport(){return null!==e&&e.apply(this,arguments)||this}return __extends$1(XHRTransport,e),XHRTransport.prototype.sendEvent=function(e){return this._sendRequest(eventToSentryRequest(e,this._api),e)},XHRTransport.prototype.sendSession=function(e){return this._sendRequest(sessionToSentryRequest(e,this._api),e)},XHRTransport.prototype._sendRequest=function(e,t){var n=this;return this._isRateLimited(e.type)?Promise.reject({event:t,type:e.type,reason:"Transport for "+e.type+" requests locked till "+this._disabledUntil(e.type)+" due to too many requests.",status:429}):this._buffer.add((function(){return new O((function(t,r){var o=new XMLHttpRequest;for(var i in o.onreadystatechange=function(){if(4===o.readyState){var i={"x-sentry-rate-limits":o.getResponseHeader("X-Sentry-Rate-Limits"),"retry-after":o.getResponseHeader("Retry-After")};n._handleResponse({requestType:e.type,response:o,headers:i,resolve:t,reject:r})}},o.open("POST",e.url),n.options.headers)n.options.headers.hasOwnProperty(i)&&o.setRequestHeader(i,n.options.headers[i]);o.send(e.body)}))}))},XHRTransport}(ee),re=function(e){function BrowserBackend(){return null!==e&&e.apply(this,arguments)||this}return __extends$1(BrowserBackend,e),BrowserBackend.prototype.eventFromException=function(e,t){return function eventFromException(e,t,n){var o=eventFromUnknownInput(t,n&&n.syntheticException||void 0,{attachStacktrace:e.attachStacktrace});return addExceptionMechanism(o,{handled:!0,type:"generic"}),o.level=r.Error,n&&n.event_id&&(o.event_id=n.event_id),O.resolve(o)}(this._options,e,t)},BrowserBackend.prototype.eventFromMessage=function(e,t,n){return void 0===t&&(t=r.Info),function eventFromMessage(e,t,n,o){void 0===n&&(n=r.Info);var i=eventFromString(t,o&&o.syntheticException||void 0,{attachStacktrace:e.attachStacktrace});return i.level=n,o&&o.event_id&&(i.event_id=o.event_id),O.resolve(i)}(this._options,e,t,n)},BrowserBackend.prototype._setupTransport=function(){if(!this._options.dsn)return e.prototype._setupTransport.call(this);var t=__assign$3(__assign$3({},this._options.transportOptions),{dsn:this._options.dsn,tunnel:this._options.tunnel,_metadata:this._options._metadata});return this._options.transport?new this._options.transport(t):supportsFetch()?new te(t):new ne(t)},BrowserBackend}(U),oe=0;function shouldIgnoreOnError(){return oe>0}function ignoreNextOnError(){oe+=1,setTimeout((function(){oe-=1}))}function wrap(e,t,n){if(void 0===t&&(t={}),"function"!=typeof e)return e;try{if(e.__sentry__)return e;if(e.__sentry_wrapped__)return e.__sentry_wrapped__}catch(t){return e}var sentryWrapped=function(){var r=Array.prototype.slice.call(arguments);try{n&&"function"==typeof n&&n.apply(this,arguments);var o=r.map((function(e){return wrap(e,t)}));return e.handleEvent?e.handleEvent.apply(this,o):e.apply(this,o)}catch(e){throw ignoreNextOnError(),withScope((function(n){n.addEventProcessor((function(e){var n=__assign$3({},e);return t.mechanism&&(addExceptionTypeValue(n,void 0,void 0),addExceptionMechanism(n,t.mechanism)),n.extra=__assign$3(__assign$3({},n.extra),{arguments:r}),n})),captureException(e)})),e}};try{for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(sentryWrapped[r]=e[r])}catch(e){}e.prototype=e.prototype||{},sentryWrapped.prototype=e.prototype,Object.defineProperty(e,"__sentry_wrapped__",{enumerable:!1,value:sentryWrapped}),Object.defineProperties(sentryWrapped,{__sentry__:{enumerable:!1,value:!0},__sentry_original__:{enumerable:!1,value:e}});try{Object.getOwnPropertyDescriptor(sentryWrapped,"name").configurable&&Object.defineProperty(sentryWrapped,"name",{get:function(){return e.name}})}catch(e){}return sentryWrapped}function injectReportDialog(e){if(void 0===e&&(e={}),e.eventId)if(e.dsn){var t=document.createElement("script");t.async=!0,t.src=new B(e.dsn).getReportDialogEndpoint(e),e.onLoad&&(t.onload=e.onLoad),(document.head||document.body).appendChild(t)}else h.error("Missing dsn option in showReportDialog call");else h.error("Missing eventId option in showReportDialog call")}var ie,se,ae,ce=function(){function GlobalHandlers(e){this.name=GlobalHandlers.id,this._onErrorHandlerInstalled=!1,this._onUnhandledRejectionHandlerInstalled=!1,this._options=__assign$3({onerror:!0,onunhandledrejection:!0},e)}return GlobalHandlers.prototype.setupOnce=function(){Error.stackTraceLimit=50,this._options.onerror&&(h.log("Global Handler attached: onerror"),this._installGlobalOnErrorHandler()),this._options.onunhandledrejection&&(h.log("Global Handler attached: onunhandledrejection"),this._installGlobalOnUnhandledRejectionHandler())},GlobalHandlers.prototype._installGlobalOnErrorHandler=function(){var e=this;this._onErrorHandlerInstalled||(addInstrumentationHandler({callback:function(t){var n=t.error,r=getCurrentHub(),o=r.getIntegration(GlobalHandlers),i=n&&!0===n.__sentry_own_request__;if(o&&!shouldIgnoreOnError()&&!i){var s=r.getClient(),a=void 0===n&&isString(t.msg)?e._eventFromIncompleteOnError(t.msg,t.url,t.line,t.column):e._enhanceEventWithInitialFrame(eventFromUnknownInput(n||t.msg,void 0,{attachStacktrace:s&&s.getOptions().attachStacktrace,rejection:!1}),t.url,t.line,t.column);addExceptionMechanism(a,{handled:!1,type:"onerror"}),r.captureEvent(a,{originalException:n})}},type:"error"}),this._onErrorHandlerInstalled=!0)},GlobalHandlers.prototype._installGlobalOnUnhandledRejectionHandler=function(){var e=this;this._onUnhandledRejectionHandlerInstalled||(addInstrumentationHandler({callback:function(t){var n=t;try{"reason"in t?n=t.reason:"detail"in t&&"reason"in t.detail&&(n=t.detail.reason)}catch(e){}var o=getCurrentHub(),i=o.getIntegration(GlobalHandlers),s=n&&!0===n.__sentry_own_request__;if(!i||shouldIgnoreOnError()||s)return!0;var a=o.getClient(),c=isPrimitive(n)?e._eventFromRejectionWithPrimitive(n):eventFromUnknownInput(n,void 0,{attachStacktrace:a&&a.getOptions().attachStacktrace,rejection:!0});c.level=r.Error,addExceptionMechanism(c,{handled:!1,type:"onunhandledrejection"}),o.captureEvent(c,{originalException:n})},type:"unhandledrejection"}),this._onUnhandledRejectionHandlerInstalled=!0)},GlobalHandlers.prototype._eventFromIncompleteOnError=function(e,t,n,r){var o,i=isErrorEvent(e)?e.message:e,s=i.match(/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i);s&&(o=s[1],i=s[2]);var a={exception:{values:[{type:o||"Error",value:i}]}};return this._enhanceEventWithInitialFrame(a,t,n,r)},GlobalHandlers.prototype._eventFromRejectionWithPrimitive=function(e){return{exception:{values:[{type:"UnhandledRejection",value:"Non-Error promise rejection captured with value: "+String(e)}]}}},GlobalHandlers.prototype._enhanceEventWithInitialFrame=function(e,t,n,r){e.exception=e.exception||{},e.exception.values=e.exception.values||[],e.exception.values[0]=e.exception.values[0]||{},e.exception.values[0].stacktrace=e.exception.values[0].stacktrace||{},e.exception.values[0].stacktrace.frames=e.exception.values[0].stacktrace.frames||[];var o=isNaN(parseInt(r,10))?void 0:r,i=isNaN(parseInt(n,10))?void 0:n,s=isString(t)&&t.length>0?t:function getLocationHref(){try{return document.location.href}catch(e){return""}}();return 0===e.exception.values[0].stacktrace.frames.length&&e.exception.values[0].stacktrace.frames.push({colno:o,filename:s,function:"?",in_app:!0,lineno:i}),e},GlobalHandlers.id="GlobalHandlers",GlobalHandlers}(),ue=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],le=function(){function TryCatch(e){this.name=TryCatch.id,this._options=__assign$3({XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0},e)}return TryCatch.prototype.setupOnce=function(){var e=getGlobalObject();(this._options.setTimeout&&fill(e,"setTimeout",this._wrapTimeFunction.bind(this)),this._options.setInterval&&fill(e,"setInterval",this._wrapTimeFunction.bind(this)),this._options.requestAnimationFrame&&fill(e,"requestAnimationFrame",this._wrapRAF.bind(this)),this._options.XMLHttpRequest&&"XMLHttpRequest"in e&&fill(XMLHttpRequest.prototype,"send",this._wrapXHR.bind(this)),this._options.eventTarget)&&(Array.isArray(this._options.eventTarget)?this._options.eventTarget:ue).forEach(this._wrapEventTarget.bind(this))},TryCatch.prototype._wrapTimeFunction=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=t[0];return t[0]=wrap(r,{mechanism:{data:{function:getFunctionName(e)},handled:!0,type:"instrument"}}),e.apply(this,t)}},TryCatch.prototype._wrapRAF=function(e){return function(t){return e.call(this,wrap(t,{mechanism:{data:{function:"requestAnimationFrame",handler:getFunctionName(e)},handled:!0,type:"instrument"}}))}},TryCatch.prototype._wrapEventTarget=function(e){var t=getGlobalObject(),n=t[e]&&t[e].prototype;n&&n.hasOwnProperty&&n.hasOwnProperty("addEventListener")&&(fill(n,"addEventListener",(function(t){return function(n,r,o){try{"function"==typeof r.handleEvent&&(r.handleEvent=wrap(r.handleEvent.bind(r),{mechanism:{data:{function:"handleEvent",handler:getFunctionName(r),target:e},handled:!0,type:"instrument"}}))}catch(e){}return t.call(this,n,wrap(r,{mechanism:{data:{function:"addEventListener",handler:getFunctionName(r),target:e},handled:!0,type:"instrument"}}),o)}})),fill(n,"removeEventListener",(function(e){return function(t,n,r){var o,i=n;try{var s=null===(o=i)||void 0===o?void 0:o.__sentry_wrapped__;s&&e.call(this,t,s,r)}catch(e){}return e.call(this,t,i,r)}})))},TryCatch.prototype._wrapXHR=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=this,o=["onload","onerror","onprogress","onreadystatechange"];return o.forEach((function(e){e in r&&"function"==typeof r[e]&&fill(r,e,(function(t){var n={mechanism:{data:{function:e,handler:getFunctionName(t)},handled:!0,type:"instrument"}};return t.__sentry_original__&&(n.mechanism.data.handler=getFunctionName(t.__sentry_original__)),wrap(t,n)}))})),e.apply(this,t)}},TryCatch.id="TryCatch",TryCatch}(),pe=function(){function Breadcrumbs(e){this.name=Breadcrumbs.id,this._options=__assign$3({console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0},e)}return Breadcrumbs.prototype.addSentryBreadcrumb=function(e){this._options.sentry&&getCurrentHub().addBreadcrumb({category:"sentry."+("transaction"===e.type?"transaction":"event"),event_id:e.event_id,level:e.level,message:getEventDescription(e)},{event:e})},Breadcrumbs.prototype.setupOnce=function(){var e=this;this._options.console&&addInstrumentationHandler({callback:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];e._consoleBreadcrumb.apply(e,__spread$3(t))},type:"console"}),this._options.dom&&addInstrumentationHandler({callback:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];e._domBreadcrumb.apply(e,__spread$3(t))},type:"dom"}),this._options.xhr&&addInstrumentationHandler({callback:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];e._xhrBreadcrumb.apply(e,__spread$3(t))},type:"xhr"}),this._options.fetch&&addInstrumentationHandler({callback:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];e._fetchBreadcrumb.apply(e,__spread$3(t))},type:"fetch"}),this._options.history&&addInstrumentationHandler({callback:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];e._historyBreadcrumb.apply(e,__spread$3(t))},type:"history"})},Breadcrumbs.prototype._consoleBreadcrumb=function(e){var t={category:"console",data:{arguments:e.args,logger:"console"},level:r.fromString(e.level),message:safeJoin(e.args," ")};if("assert"===e.level){if(!1!==e.args[0])return;t.message="Assertion failed: "+(safeJoin(e.args.slice(1)," ")||"console.assert"),t.data.arguments=e.args.slice(1)}getCurrentHub().addBreadcrumb(t,{input:e.args,level:e.level})},Breadcrumbs.prototype._domBreadcrumb=function(e){var t,n="object"==typeof this._options.dom?this._options.dom.serializeAttribute:void 0;"string"==typeof n&&(n=[n]);try{t=e.event.target?htmlTreeAsString(e.event.target,n):htmlTreeAsString(e.event,n)}catch(e){t="<unknown>"}0!==t.length&&getCurrentHub().addBreadcrumb({category:"ui."+e.name,message:t},{event:e.event,name:e.name,global:e.global})},Breadcrumbs.prototype._xhrBreadcrumb=function(e){if(e.endTimestamp){if(e.xhr.__sentry_own_request__)return;var t=e.xhr.__sentry_xhr__||{},n=t.method,r=t.url,o=t.status_code,i=t.body;getCurrentHub().addBreadcrumb({category:"xhr",data:{method:n,url:r,status_code:o},type:"http"},{xhr:e.xhr,input:i})}else;},Breadcrumbs.prototype._fetchBreadcrumb=function(e){e.endTimestamp&&(e.fetchData.url.match(/sentry_key/)&&"POST"===e.fetchData.method||(e.error?getCurrentHub().addBreadcrumb({category:"fetch",data:e.fetchData,level:r.Error,type:"http"},{data:e.error,input:e.args}):getCurrentHub().addBreadcrumb({category:"fetch",data:__assign$3(__assign$3({},e.fetchData),{status_code:e.response.status}),type:"http"},{input:e.args,response:e.response})))},Breadcrumbs.prototype._historyBreadcrumb=function(e){var t=getGlobalObject(),n=e.from,r=e.to,o=parseUrl(t.location.href),i=parseUrl(n),s=parseUrl(r);i.path||(i=o),o.protocol===s.protocol&&o.host===s.host&&(r=s.relative),o.protocol===i.protocol&&o.host===i.host&&(n=i.relative),getCurrentHub().addBreadcrumb({category:"navigation",data:{from:n,to:r}})},Breadcrumbs.id="Breadcrumbs",Breadcrumbs}(),de=function(){function LinkedErrors(e){void 0===e&&(e={}),this.name=LinkedErrors.id,this._key=e.key||"cause",this._limit=e.limit||5}return LinkedErrors.prototype.setupOnce=function(){addGlobalEventProcessor((function(e,t){var n=getCurrentHub().getIntegration(LinkedErrors);return n?n._handler(e,t):e}))},LinkedErrors.prototype._handler=function(e,t){if(!(e.exception&&e.exception.values&&t&&isInstanceOf(t.originalException,Error)))return e;var n=this._walkErrorTree(t.originalException,this._key);return e.exception.values=__spread$3(n,e.exception.values),e},LinkedErrors.prototype._walkErrorTree=function(e,t,n){if(void 0===n&&(n=[]),!isInstanceOf(e[t],Error)||n.length+1>=this._limit)return n;var r=exceptionFromStacktrace(computeStackTrace(e[t]));return this._walkErrorTree(e[t],t,__spread$3([r],n))},LinkedErrors.id="LinkedErrors",LinkedErrors}(),fe=getGlobalObject(),he=function(){function UserAgent(){this.name=UserAgent.id}return UserAgent.prototype.setupOnce=function(){addGlobalEventProcessor((function(e){var t,n,r;if(getCurrentHub().getIntegration(UserAgent)){if(!fe.navigator&&!fe.location&&!fe.document)return e;var o=(null===(t=e.request)||void 0===t?void 0:t.url)||(null===(n=fe.location)||void 0===n?void 0:n.href),i=(fe.document||{}).referrer,s=(fe.navigator||{}).userAgent,a=__assign$3(__assign$3(__assign$3({},null===(r=e.request)||void 0===r?void 0:r.headers),i&&{Referer:i}),s&&{"User-Agent":s}),c=__assign$3(__assign$3({},o&&{url:o}),{headers:a});return __assign$3(__assign$3({},e),{request:c})}return e}))},UserAgent.id="UserAgent",UserAgent}(),ve=function(){function Dedupe(){this.name=Dedupe.id}return Dedupe.prototype.setupOnce=function(e,t){e((function(e){var n=t().getIntegration(Dedupe);if(n){try{if(n._shouldDropEvent(e,n._previousEvent))return null}catch(t){return n._previousEvent=e}return n._previousEvent=e}return e}))},Dedupe.prototype._shouldDropEvent=function(e,t){return!!t&&(!!this._isSameMessageEvent(e,t)||!!this._isSameExceptionEvent(e,t))},Dedupe.prototype._isSameMessageEvent=function(e,t){var n=e.message,r=t.message;return!(!n&&!r)&&(!(n&&!r||!n&&r)&&(n===r&&(!!this._isSameFingerprint(e,t)&&!!this._isSameStacktrace(e,t))))},Dedupe.prototype._getFramesFromEvent=function(e){var t=e.exception;if(t)try{return t.values[0].stacktrace.frames}catch(e){return}else if(e.stacktrace)return e.stacktrace.frames},Dedupe.prototype._isSameStacktrace=function(e,t){var n=this._getFramesFromEvent(e),r=this._getFramesFromEvent(t);if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;if(n=n,(r=r).length!==n.length)return!1;for(var o=0;o<r.length;o++){var i=r[o],s=n[o];if(i.filename!==s.filename||i.lineno!==s.lineno||i.colno!==s.colno||i.function!==s.function)return!1}return!0},Dedupe.prototype._getExceptionFromEvent=function(e){return e.exception&&e.exception.values&&e.exception.values[0]},Dedupe.prototype._isSameExceptionEvent=function(e,t){var n=this._getExceptionFromEvent(t),r=this._getExceptionFromEvent(e);return!(!n||!r)&&(n.type===r.type&&n.value===r.value&&(!!this._isSameFingerprint(e,t)&&!!this._isSameStacktrace(e,t)))},Dedupe.prototype._isSameFingerprint=function(e,t){var n=e.fingerprint,r=t.fingerprint;if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;n=n,r=r;try{return!(n.join("")!==r.join(""))}catch(e){return!1}},Dedupe.id="Dedupe",Dedupe}(),_e=function(e){function BrowserClient(t){void 0===t&&(t={});return t._metadata=t._metadata||{},t._metadata.sdk=t._metadata.sdk||{name:"sentry.javascript.browser",packages:[{name:"npm:@sentry/browser",version:G}],version:G},e.call(this,re,t)||this}return __extends$1(BrowserClient,e),BrowserClient.prototype.showReportDialog=function(e){void 0===e&&(e={}),getGlobalObject().document&&(this._isEnabled()?injectReportDialog(__assign$3(__assign$3({},e),{dsn:e.dsn||this.getDsn()})):h.error("Trying to call showReportDialog with Sentry Client disabled"))},BrowserClient.prototype._prepareEvent=function(t,n,r){return t.platform=t.platform||"javascript",e.prototype._prepareEvent.call(this,t,n,r)},BrowserClient.prototype._sendEvent=function(t){var n=this.getIntegration(pe);n&&n.addSentryBreadcrumb(t),e.prototype._sendEvent.call(this,t)},BrowserClient}(L),ye=[new z,new q,new le,new pe,new ce,new de,new ve,new he];function __awaiter(e,t,n,r){return new(n||(n=Promise))((function(o,i){function fulfilled(e){try{step(r.next(e))}catch(e){i(e)}}function rejected(e){try{step(r.throw(e))}catch(e){i(e)}}function step(e){e.done?o(e.value):function adopt(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(fulfilled,rejected)}step((r=r.apply(e,t||[])).next())}))}function __classPrivateFieldGet(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)}function __classPrivateFieldSet(e,t,n,r,o){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?o.call(e,n):o?o.value=n:t.set(e,n),n}ie=new WeakMap,se=new WeakMap,ae=new WeakMap,function init(e){if(void 0===e&&(e={}),void 0===e.defaultIntegrations&&(e.defaultIntegrations=ye),void 0===e.release){var t=getGlobalObject();t.SENTRY_RELEASE&&t.SENTRY_RELEASE.id&&(e.release=t.SENTRY_RELEASE.id)}void 0===e.autoSessionTracking&&(e.autoSessionTracking=!0),function initAndBind(e,t){var n;!0===t.debug&&h.enable();var r=getCurrentHub();null===(n=r.getScope())||void 0===n||n.update(t.initialScope);var o=new e(t);r.bindClient(o)}(_e,e),e.autoSessionTracking&&function startSessionTracking(){if(void 0===getGlobalObject().document)return void h.warn("Session tracking in non-browser environment with @sentry/browser is not supported.");var e=getCurrentHub();if("function"!=typeof e.startSession||"function"!=typeof e.captureSession)return;e.startSession({ignoreDuration:!0}),e.captureSession(),addInstrumentationHandler({callback:function(t){var n=t.from,r=t.to;void 0!==n&&n!==r&&(e.startSession({ignoreDuration:!0}),e.captureSession())},type:"history"})}()}({dsn:"https://4ae9999809ef418b819b16bf383e5fd0@o143001.ingest.sentry.io/5828167",maxBreadcrumbs:100,attachStacktrace:!0});const ge=new class KepubifyApp{constructor(t){Object.defineProperty(this,"kepubify",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),ie.set(this,void 0),se.set(this,void 0),ae.set(this,!1);const n=document.querySelector(t);this.kepubify=new e.Kepubify,__classPrivateFieldSet(this,se,{el:n,title:n.querySelector(".try__pane--files > .try__pane__title"),files:n.querySelector(".try__pane--files > .try__pane__contents"),options:n.querySelector(".try__pane--options > .try__pane__contents > form.options")},"f")}start(){return __awaiter(this,void 0,void 0,(function*(){if(__classPrivateFieldGet(this,ae,"f"))return;addBreadcrumb({message:"Initializing kepubify"}),__classPrivateFieldGet(this,se,"f").title.textContent="Downloading kepubify...";try{__classPrivateFieldSet(this,ie,yield this.kepubify.init(((e,t,n)=>{__classPrivateFieldGet(this,se,"f").title.textContent=e?`Downloading kepubify... ${(t/1e6).toFixed(2)} / ${(n/1e6).toFixed(2)} MB (${(t/n*100).toFixed(0)}%)`:t?`Downloading kepubify... ${(t/1e6).toFixed(2)} MB`:"Downloading kepubify..."})),"f")}catch(e){throw __classPrivateFieldGet(this,se,"f").title.textContent=`Failed to download kepubify: ${e}`,__classPrivateFieldGet(this,se,"f").title.title=`${e}`,new Error(`failed to initialize kepubify: ${e}`)}__classPrivateFieldGet(this,se,"f").title.textContent=`Kepubify ${__classPrivateFieldGet(this,ie,"f")}`,addBreadcrumb({message:`Initialized kepubify ${__classPrivateFieldGet(this,ie,"f")}`});const e=__classPrivateFieldGet(this,se,"f").files.appendChild(document.createElement("button"));e.classList.add("file"),e.classList.add("file--placeholder"),e.title="Browse";const t=e.appendChild(document.createElement("div"));t.classList.add("file__info");const n=t.appendChild(document.createElement("span"));n.classList.add("file__info__name"),n.textContent=window.matchMedia("(pointer: coarse)").matches?"Choose a file...":"Drop your files here, or click to browse...",__classPrivateFieldGet(this,se,"f").placeholder=e,__classPrivateFieldGet(this,se,"f").placeholder.addEventListener("click",(()=>{const e=document.createElement("input");e.type="file",e.accept="application/epub+zip",e.multiple=!0,e.addEventListener("input",(()=>{if(e.files)for(let t=0;t<e.files.length;t++)this.enqueue(e.files[t])})),e.click()}));for(const e of["drag","dragstart","dragend","dragover","dragenter","dragleave","drop"])__classPrivateFieldGet(this,se,"f").files.addEventListener(e,(t=>{var n;if("drop"==e){const e=null===(n=t.dataTransfer)||void 0===n?void 0:n.files;if(e)for(let t=0;t<e.length;t++)this.enqueue(e[t])}"dragover"!=e&&"dragenter"!=e||__classPrivateFieldGet(this,se,"f").files.classList.add("dragover"),"dragend"!=e&&"dragleave"!=e&&"drop"!=e||__classPrivateFieldGet(this,se,"f").files.classList.remove("dragover"),t.preventDefault(),t.stopPropagation()}));__classPrivateFieldSet(this,ae,!0,"f")}))}enqueue(e){var t;return __awaiter(this,void 0,void 0,(function*(){addBreadcrumb({message:`Enqueuing ${e.name} (size=${e.size}, type=${e.type})`});const n=__classPrivateFieldGet(this,se,"f").placeholder.insertAdjacentElement("beforebegin",document.createElement("div"));n.classList.add("file"),n.setAttribute("tabindex","0");const r=n.appendChild(document.createElement("div"));r.classList.add("file__info");const o=r.appendChild(document.createElement("span"));o.classList.add("file__info__progress");const i=r.appendChild(document.createElement("a"));let s,a;i.classList.add("file__info__name"),i.textContent=e.name;try{a=this.config,s=yield this.kepubify.kepubify(e,a,((e,t)=>{o.style.width=100*(t?e/t:0)+"%"})),o.style.width="100%",o.classList.add("file__info__progress--success")}catch(t){o.style.width="100%",o.classList.add("file__info__progress--error");const i=n.appendChild(document.createElement("div"));i.classList.add("file__status"),i.textContent=t.toString();const s=r.appendChild(document.createElement("button"));return s.textContent="−",s.title="Remove",s.addEventListener("click",(()=>{n.remove()})),void captureException(t,{extra:{file:{name:null==e?void 0:e.name,size:null==e?void 0:e.size,type:null==e?void 0:e.type},worker:{version:__classPrivateFieldGet(this,ie,"f")},config:a}})}addBreadcrumb({message:`Finished ${e.name} (${s.size} bytes)`});try{i.href=URL.createObjectURL(new Blob([s],{type:"application/epub+zip"})),i.download=e.name.replace(/([.]epub)?$/,".kepub.epub"),i.textContent=i.download;const t=r.appendChild(document.createElement("button"));t.textContent="−",t.title="Remove",t.addEventListener("click",(()=>{n.remove(),URL.revokeObjectURL(i.href)}))}catch(t){o.style.width="100%",o.classList.add("file__info__progress--error");const r=n.appendChild(document.createElement("div"));return r.classList.add("file__status"),r.textContent=`Error: failed to save file: ${t}`,void captureException(new Error(`failed to create download link: ${t}`),{extra:{file:{name:e.name,size:e.size,type:e.type},kepub:{size:s.size},worker:{version:__classPrivateFieldGet(this,ie,"f")}}})}null===(t=window.goatcounter)||void 0===t||t.count({path:"kepubify-wasm-convert",event:!0})}))}get config(){const t=new e.KepubifyConfig;switch(__classPrivateFieldGet(this,se,"f").options["smarten-punctuation"].value){case"off":break;case"on":t.smartypants()}switch(__classPrivateFieldGet(this,se,"f").options["dummy-titlepage"].value){case"auto":break;case"always":t.dummyTitlepage(!0);break;case"never":t.dummyTitlepage(!1)}switch(""!=__classPrivateFieldGet(this,se,"f").options["custom-css"].value.trim()&&t.addCSS(__classPrivateFieldGet(this,se,"f").options["custom-css"].value),__classPrivateFieldGet(this,se,"f").options.hyphenation.value){case"default":break;case"enable":t.hyphenate(!0);break;case"disable":t.hyphenate(!1)}switch(__classPrivateFieldGet(this,se,"f").options["full-screen-fixes"].value){case"off":break;case"on":t.fullScreenFixes()}return t}}("#try");return ge.start().catch((e=>captureException(new Error(`failed to start kepubify: ${e}`)))),document.getElementById("unsupported-browser").style.display="none",ge}(kepubify);
//# sourceMappingURL=kepubify_try.js.map
